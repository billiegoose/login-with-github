{"version":3,"file":null,"sources":["../src/LoginWithGithub.js"],"sourcesContent":["\"use strict\"\n\nfunction initState () {\n  return window.crypto.getRandomValues(new Uint8Array(8)).toString()\n}\n\nfunction generateLoginLink ({client_id, state}) {\n  return 'https://github.com/login/oauth/authorize?client_id=' + client_id + '&state=' + state\n}\n\nexport default function ({client_id}) {\n  let state = initState()\n  let url = generateLoginLink({client_id, state})\n  let mychild = window.open(url)\n  return new Promise(function(resolve, reject) {\n    window.addEventListener('message', function (event) {\n      // Validate sender\n      if (event.source !== mychild) {\n        return console.warn('recieved an unexpected postMessage')\n      }\n      // Validate state\n      if (event.data && event.data.state) {\n        if (event.data.state !== state) {\n          return reject('state variable mismatch')\n        }\n        resolve({\n          client_id: client_id,\n          code: event.data.code,\n          state: state\n        })\n      } else {\n        reject(event)\n      }\n    })\n  })\n}\n"],"names":["initState","window","crypto","getRandomValues","Uint8Array","toString","generateLoginLink","client_id","state","url","mychild","open","Promise","resolve","reject","addEventListener","event","source","console","warn","data","code"],"mappings":";;;;;;AAEA,SAASA,SAAT,GAAsB;SACbC,OAAOC,MAAP,CAAcC,eAAd,CAA8B,IAAIC,UAAJ,CAAe,CAAf,CAA9B,EAAiDC,QAAjD,EAAP;;;AAGF,SAASC,iBAAT,CAA4B,EAACC,SAAD,EAAYC,KAAZ,EAA5B,EAAgD;SACvC,wDAAwDD,SAAxD,GAAoE,SAApE,GAAgFC,KAAvF;;;AAGF,sBAAe,UAAU,EAACD,SAAD,EAAV,EAAuB;MAChCC,QAAQR,WAAZ;MACIS,MAAMH,kBAAkB,EAACC,SAAD,EAAYC,KAAZ,EAAlB,CAAV;MACIE,UAAUT,OAAOU,IAAP,CAAYF,GAAZ,CAAd;SACO,IAAIG,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;WACpCC,gBAAP,CAAwB,SAAxB,EAAmC,UAAUC,KAAV,EAAiB;;UAE9CA,MAAMC,MAAN,KAAiBP,OAArB,EAA8B;eACrBQ,QAAQC,IAAR,CAAa,oCAAb,CAAP;;;UAGEH,MAAMI,IAAN,IAAcJ,MAAMI,IAAN,CAAWZ,KAA7B,EAAoC;YAC9BQ,MAAMI,IAAN,CAAWZ,KAAX,KAAqBA,KAAzB,EAAgC;iBACvBM,OAAO,yBAAP,CAAP;;gBAEM;qBACKP,SADL;gBAEAS,MAAMI,IAAN,CAAWC,IAFX;iBAGCb;SAHT;OAJF,MASO;eACEQ,KAAP;;KAhBJ;GADK,CAAP;;;;;"}